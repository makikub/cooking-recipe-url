---
description: プロジェクト全体の一般的なルールとガイドライン
globs: ["**/*"]
alwaysApply: true
---

# プロジェクト全体のルール

## プロジェクト概要

このプロジェクトは、Discordに投稿された料理レシピURLを自動収集・分類し、Webサイトで閲覧できるシステムです。

## アーキテクチャ

- **フロントエンド**: Next.js 14 (App Router) + TypeScript + Tailwind CSS
- **バックエンド**: Python スクリプト（ローカル実行）
- **データベース**: Supabase (PostgreSQL)
- **デプロイ**: Vercel（フロントエンド）

## ディレクトリ構造

- `frontend/`: Next.jsアプリケーション
- `scripts/`: Pythonデータ収集スクリプト
- `supabase/`: データベーススキーマとドキュメント
- `docs/`: プロジェクトドキュメント

## コーディング規約

- **言語**: 日本語でコメントとドキュメントを記述
- **コミットメッセージ**: 日本語で記述
- **コード**: 英語で記述（変数名、関数名など）

## セキュリティ

- 環境変数は`.env`ファイルに保存し、Gitにコミットしない
- `.env.example`ファイルで必要な環境変数を明示
- APIキーやトークンは環境変数で管理

## エラーハンドリング

- ユーザーに分かりやすいエラーメッセージを表示
- ログに詳細なエラー情報を記録
- 適切なフォールバック処理を実装

## パフォーマンス

- 不要な再レンダリングを避ける
- 画像の最適化を実施
- データベースクエリの最適化

## テスト

- 各モジュールは個別にテスト可能な構造にする
- テストコードは将来追加予定

## ドキュメント

- README.mdを最新に保つ
- 各ディレクトリにREADME.mdを配置
- 複雑な処理にはコメントを記述

## Git運用

- 機能追加はブランチを切って開発
- コミットメッセージは明確に記述
- プルリクエストでコードレビューを実施

## 依存関係

- フロントエンド: `npm`で管理（`package.json`）
- Python: `uv`で管理（`pyproject.toml`）
- 依存関係の更新は慎重に行う

## 環境変数

### フロントエンド（`.env.local`）
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### Pythonスクリプト（`.env`）
- `DISCORD_TOKEN`
- `DISCORD_CHANNEL_ID`
- `SUPABASE_URL`
- `SUPABASE_SERVICE_KEY`

## デプロイ

- フロントエンドはVercelに自動デプロイ
- 環境変数はVercel Dashboardで設定
- Pythonスクリプトはローカルで月1回手動実行
